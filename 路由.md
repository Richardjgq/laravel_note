# HTTP路由

## 基本路由

最基本的Laravel路由只接收一个URI和一个闭包,并以此提供一个非常简单且优雅的定义路由方法:

```
Route::get('foo', function () {
    return 'Hello World';
});
```

**默认路由文件**

所有路由都定义位于routes目录下的路由文件中,这些文件通过框架自动加载.

routes\/web.php文件定义了web界面的路由,这些路由被分配给web中间件组,从而可以提供session和csrf防护等功能.

routes\/api.php中的路由是无状态的,被分配到api中间件组.

大部分应用都是从routes\/web.php文件开始定义路由的.

**有效的路由方法**

可以注册路由来响应任何HTTP请求:

```php
Route::get($uri, $callback);
Route::post($uri, $callback);
Route::put($uri, $callback);
Route::patch($uri, $callback);
Route::delete($uri, $callback);
Route::options($uri, $callback);
```

有时候还需要注册路由响应多个HTTP请求,可以通过match方法来实现.或者使用any方法注册一个路由来响应所有HTTP请求:

```
Route::match(['get', 'post'], '/', function(){
    //
});
Route::any('foo', function(){
    //
});
```

**CSRF防护**

在web路由文件中所有请求方式PUT,POST或DELETE的HTML表单都会包含一个CSRF令牌字段,否则请求会被拒绝.

```
<form method="POST" action="/profile">
    {{csrf_field()}}
    ...
</form>
```

### **路由参数**

**必选参数**

有时需要在路由中捕获URI片段.比如从URL中捕获用户ID:

```
Route::get('user/{id}', function ($id) {
    return 'User ' . $id;
});
```

当然,可以按需要在路由中定义多个路由参数:

```
Route::get('posts/{post}/comments/{comment}', function ($postId, $commentId) {
    return $postId.$commentId;
});
```

路由参数总是通过花括号进行包裹,这些参数在路由被执行时会被传递到路由的闭包.

> 注:路由参数不能包含`-`字符,需要的话可以使用`_`替代.

**可选参数**

如果需要指定可选的路由参数,通过在参数名后加一个`?`标记来实现,同时给相应的变量指定默认值:

```
Route::get('user/{name?}', function ($name = null) {
    return $name;
});
Route:get('user/{name?}', function ($name = 'John') {
    return $name;
});
```



