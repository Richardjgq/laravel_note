# 查询关联

所有类型的关联都是通过方法定义的 , 可以调用方法来获取关联实例 , 然后在其后使用查询语句构造器进行约束 .

```php
return $test->posts()->first();
# 和直接返回属性一样
return $test->posts;
```

加一些条件约束 :

```php
$user = App\User::find(1);

$user->posts()->where('active', 1)->get();
```

#### 关联方法和动态属性

前面提到过 , 如果没什么条件约束 , 可以直接使用属性的方式访问数据 , 即动态属性 . 动态属性都是懒加载的 , 即这些关联数据在实际被访问时才被加载 . 这也引出了后面的预加载的意义 , 为了减少SQL语句请求 , 这些关联的数据经常需要预加载 . 

#### 基于存在的关联查询

#### 基于不存在的关联查询

#### 关联数据计数



