# 表单验证

表单验证有两种方式,一种是使用Request对象.一种是使用Validation.

**使用Request对象**

创建Request

```
php artisan make:request CreateArticleRequest
```

编辑刚刚创建的文件app/Http/Requests/CreateArticleRequest.php

```
# 其中有两个方法
# authorize()的意思是A编辑的内容不能由B修改,这里考虑到用户模块,暂时改为true,任何人都可以提交数据过来.
# rules()就是规则方法
# 这里规则先简单设置不能为空
return [
    'title'=>'required|min:3',
    'content'=>'required',
    'publish_at'=>'required'
];
# 常用的验证规则,多个规则用|隔开
email,min:3,max:10
```

> 查看更多的验证规则
>
> [https://laravel.com/docs/5.1/validation](https://laravel.com/docs/5.1/validation)

要在控制器方法中使用Request规则,直接引入即可

```
public function store(Requests\CreateArticleRequest $request)
```

如果提交失败,会在视图中返回$error变量信息.

编辑视图

```
@if($errors->any())
<ul class="list-group">
    @foreach($errors->all() as $error)
        <li class="list-group-item list-group-item-danger">
            {{ $error }}
        </li>
    @endforeach
</ul>
@endif
```

**在控制器中直接使用Validate\(\)方法**

```
public function store(Request $request)
{
    $this->validate($request, [
        'title'=>'required|min:3',
        'content'=>'required',
        'publish_at'=>'required'
    ]);
    $title = $request->get('title');
    # 接收POST数据
    $post = $request->all();
    //$post['publish_at'] = Carbon::now();
    # 数据入库 , Create方法默认过滤掉了token
    Article::create($post);
    # 重定向URI
    return redirect('/articles');
}
```



