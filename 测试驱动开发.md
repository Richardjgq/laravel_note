

# 博客应用



### 测试驱动开发



**运行PHPUnit**



在项目根目录下简单运行`phpunit`命令,如果报错



`command not found` 或者 `permissions denied`,后者是因为没有为phpunit设置正确的权限以致无权执行命令.



前者的解决方法:



```

composer global require 'phpunit/phpunit'

vi ~/.bashrc

export PATH="~/.composer/vendor/bin:vendor/bin:$PATH"

source ~/.bashrc

rm -rf vendor/bin vendor/classpreloader vendor/phpspec vendor/phpunit vendor/psy

composer install

```



之后在项目目录运行`phpunit`即可.



**PHPUnit配置**



根目录下的phpunit.xml文件包含了PHPUnit的配置,测试文件位于tests目录下,可以看到下面的两个测试文件:



* `ExampleTest.php` - 包含一个`testBasicExample()`测试,`ExampleTest`继承自`TestCase`;

* `TestCase.php` - Laravel测试类的基类.



`testBasicExample()`方法:



```

public function testBasicExample()

{

$this->visit('/')->see('Laravel');

}

```



这个方法会访问应用首页并查看页面是否包含`Laravel`字样.



**Crawler测试的方法和属性**



Crawler意为\(网络\)爬虫,Crawler测试允许你在web应用中测试页面访问.



常用属性和方法:



> $this-&gt;response - web应用返回的最后一个响应

>

> $this-&gt;currentUri - 当前访问的URL

>

> $this-&gt;visit\($uri\) - 通过GET请求访问给定URL

>

> $this-&gt;get\($uri, array $headers = \[\]\) - 通过GET请求获取给定URI页面的内容,可传递请求头信息\(可选\)

>

> $this-&gt;post\($uri, array $data = \[\], array $headers = \[\]\) - 提交POST请求到给定URI

>

> $this-&gt;put\($uri, array $data = \[\], array $headers = \[\]\) - 提交PUT请求到给定URI

>

> $this-&gt;patch\($uri, array $data = \[\], array $headers = \[\]\) - 提交PATCH请求到给定URI

>

> $this-&gt;delete\($uri, array $data = \[\], array $headers = \[\]\) - 提交DELETE请求到给定URI

>

> $this-&gt;followRedirects\(\) - 根据最后响应进行任意重定向

>

> $this-&gt;see\($text, $negate = false\) - 断言给定文本在页面中是否出现

>

> $this-&gt;seeJson\(array $data = null\) - 断言响应中是否包含JSON,如果传递了$data,还要断言包含的JSON是否与给定的匹配
