# 服务提供者

服务提供者是Laravel应用启动的中心,自己的应用以及所有Laravel的核心服务都是通过服务提供者启动的.

但是,所谓的启动通常是指注册事务,包括注册服务容器绑定,事件监听器,中间件甚至路由.服务提供者是应用的配置的中心.

打开Laravel自带的config\/app.php文件,将会看到一个providers数组,这里就是应用所要加载的所有服务提供者类.其中很多是延迟加载的,也就是说不是每次请求都会被加载,只有真的用到它们的时候才会加载.

### 编写服务提供者

所有的服务提供者都继承自`Illuminate\Support\ServiceProvider`类.大部分服务提供者都包含两个方法:register和boot.在register方法中,唯一要做的事情就是绑定事物到服务容器,不要尝试在其中注册时间监听器,路由或者任何其他功能.

通过Artisan命令make:provider可以简单生成一个新的提供者:

```
php artisan make:provider RiakServiceProvider
```

**register方法**

```php
<?php
namespace App\Providers;
use Riak\Connection;
use Illuminate\Support\ServiceProvider;

class RiakServiceProvider extends ServiceProvider
{
    // 在容器中注册绑定
    public function register()
    {
        $this->app->singleton('Riak\Contracts\Connection', function($app){
            return new Connection(config('riak'));
        });
    }
}
```

该服务提供者只定义了一个register方法,并使用该方法在服务容器中定义了一个`Riak\Contracts\Connection`的实现.

**boot方法**

如果想要在服务提供者中注册视图composer,就要用到boot方法了.该方法在所有服务提供者被注册以后才会被调用,也就是说可以在其中访问框架已经注册的所有其他服务:

```php
<?php
namespace App\Providers;
use Illuminate\Support\ServiceProvider;

class EventServiceProvider extends ServiceProvider
{
    public function boot()
    {
        view()->composer('view', function(){
            //
        });
    }

    // 在容器中注册绑定
    public function register()
    {
        //
    }
}

```



### 注册服务提供者

### 延迟加载服务提供者

