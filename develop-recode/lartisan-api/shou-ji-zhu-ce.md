# 手机注册

#### 手机注册流程

注册示例 , 知乎 :

1. 输入手机号 , 点击登录
2. 输入正确的图片验证码 , 点击验证 , 知乎会发送验证码至刚刚填写的手机
3. 提交正确的短信验证码后 , 注册完成

未注册手机验证后自动登录 .

#### 流程分解

![](/assets/手机注册流程分解.png)

流程详解：

1. 用户输入手机号 , 请求图片验证码接口 ; 
2. 服务器返回图片验证码 ; 
3. 使用正确的图片验证码 , 请求短信验证码 ; 
4. 服务器调用短信运营商的接口 , 发送短信至用户手机 ; 
5. 通过正确的短信验证码 , 请求用户注册接口 ; 
6. 完成注册流程 . 

上面步骤中用到的资源 :

* captchas —— 图片验证码
* verificationCodes —— 短信验证码
* users —— 用户

对应三个资源 , 设计出对应的三个接口 :

* POST api/captchas 创建图片验证码
* POST api/verificationCodes 发送短信验证码
* POST api/users 用户注册

这里可以再次体现RESTful设计原则 , 不资源尽量使用动词 , 比如常见的注册api/register , 注册即创建资源 , 所以接口使用api/users更为合理 .

这里为了配合原来的注册逻辑 , 可以让用户注册的最后一步注册 , 同时提交用户名 , 密码以及短信验证码来完成注册 .

最后整理一下流程 :

* 用户输入手机号
* 通过手机号请求图片验证码 , 显示给用户
* 用户输入正确的图片验证码 , 服务器发送验证码至用户手机
* 用户填写,姓名,密码,及正确的短信验证码,完成注册 . 



